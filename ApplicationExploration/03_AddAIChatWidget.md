# ç»™ VitePress åšå®¢æ·»åŠ  AI å¯¹è¯åŠ©æ‰‹ï¼šä»æ„æ€åˆ°å®ç°

ä½ æ˜¯å¦æ›¾ç»æƒ³è¿‡åœ¨æµè§ˆåšå®¢æ—¶èƒ½éšæ—¶å’Œ AI åŠ©æ‰‹å¯¹è¯ï¼Ÿåœ¨è¿™ç¯‡æ–‡ç« ä¸­ï¼Œæˆ‘å°†åˆ†äº«å¦‚ä½•åœ¨ VitePress åšå®¢ä¸­æ·»åŠ ä¸€ä¸ªæ™ºèƒ½å¯¹è¯åŠ©æ‰‹çš„å®Œæ•´è¿‡ç¨‹ã€‚è¿™ä¸ªå°åŠ©æ‰‹ä¸ä»…èƒ½å¤Ÿå®æ—¶å›ç­”é—®é¢˜ï¼Œè¿˜æ”¯æŒ Markdown æ¸²æŸ“ã€ä»£ç é«˜äº®ï¼Œæœ€é‡è¦çš„æ˜¯ - å®ƒèƒ½è®°ä½å¯¹è¯çš„ä¸Šä¸‹æ–‡ï¼

## ğŸ’¡ çµæ„Ÿæ¥æº

åœ¨æµè§ˆå…¶ä»–æŠ€æœ¯åšå®¢æ—¶ï¼Œæˆ‘æ³¨æ„åˆ°å¾ˆå¤šç½‘ç«™éƒ½æœ‰åœ¨çº¿å®¢æœæˆ–åé¦ˆåŠŸèƒ½ã€‚æ—¢ç„¶æˆ‘çš„åšå®¢ä¸»é¢˜æ˜¯å…³äº AI çš„ï¼Œä¸ºä»€ä¹ˆä¸ç›´æ¥é›†æˆä¸€ä¸ª AI åŠ©æ‰‹å‘¢ï¼Ÿè¿™æ ·è¯»è€…åœ¨é˜…è¯»æ–‡ç« æ—¶é‡åˆ°é—®é¢˜ï¼Œå°±å¯ä»¥ç›´æ¥è¯¢é—® AI åŠ©æ‰‹äº†ã€‚

## ğŸ¯ éœ€æ±‚åˆ†æ

åœ¨å¼€å§‹ç¼–ç ä¹‹å‰ï¼Œæˆ‘åˆ—å‡ºäº†å‡ ä¸ªæ ¸å¿ƒéœ€æ±‚ï¼š

1. **ä¾¿æ·æ€§**ï¼šæ‚¬æµ®åœ¨å³ä¸‹è§’ï¼Œéšæ—¶å¯ç”¨
2. **æ™ºèƒ½æ€§**ï¼šä½¿ç”¨å…ˆè¿›çš„ AI æ¨¡å‹ï¼ˆGeminiï¼‰
3. **ç¾è§‚æ€§**ï¼šæ”¯æŒ Markdownã€ä»£ç é«˜äº®
4. **è¿è´¯æ€§**ï¼šä¿æŒå¯¹è¯ä¸Šä¸‹æ–‡
5. **å®‰å…¨æ€§**ï¼šä¿æŠ¤ API å¯†é’¥

## ğŸ› ï¸ æŠ€æœ¯é€‰å‹

ç»è¿‡è°ƒç ”ï¼Œæˆ‘é€‰æ‹©äº†ä»¥ä¸‹æŠ€æœ¯æ ˆï¼š

- **å‰ç«¯**ï¼šVue 3 + VitePressï¼ˆå·²æœ‰æ¡†æ¶ï¼‰
- **åç«¯**ï¼šCloudflare Workersï¼ˆè½»é‡çº§ã€å…è´¹ï¼‰
- **AI æ¨¡å‹**ï¼šGoogle Geminiï¼ˆå¼ºå¤§ä¸”ç»æµï¼‰
- **å·¥å…·åº“**ï¼šmarkdown-itï¼ˆMarkdown æ¸²æŸ“ï¼‰ã€highlight.jsï¼ˆä»£ç é«˜äº®ï¼‰

## ğŸš€ å¼€å‘å†ç¨‹

### ç¬¬ä¸€æ­¥ï¼šåˆ›å»º Worker æœåŠ¡

é¦–å…ˆéœ€è¦è§£å†³çš„æ˜¯å¦‚ä½•å®‰å…¨åœ°è°ƒç”¨ Gemini APIã€‚ç›´æ¥åœ¨å‰ç«¯è°ƒç”¨æ˜¯ä¸è¡Œçš„ï¼ŒAPI å¯†é’¥ä¼šæš´éœ²ã€‚äºæ˜¯æˆ‘é€‰æ‹©äº† Cloudflare Workers ä½œä¸ºä¸­é—´å±‚ã€‚

```javascript
// workers/AI_Perspective_worker.js
async function handleGeminiChat(request, env) {
  // ... Worker ä»£ç 
}
```

**é‡åˆ°çš„é—®é¢˜**ï¼š
1. æœ€åˆä½¿ç”¨ Bearer Token æ–¹å¼è®¤è¯å¤±è´¥
   ```javascript
   // âŒ é”™è¯¯æ–¹å¼
   headers: {
     'Authorization': `Bearer ${env.GEMINI_API_KEY}`
   }
   ```
   
   ```javascript
   // âœ… æ­£ç¡®æ–¹å¼
   const apiUrl = `https://generativelanguage.googleapis.com/v1beta/models/gemini-pro:generateContent?key=${env.GEMINI_API_KEY}`;
   ```

2. å¼€å‘ç¯å¢ƒé…ç½®å›°æ‰°
   ```bash
   # è§£å†³æ–¹æ¡ˆï¼šä½¿ç”¨ .dev.vars æ–‡ä»¶
   echo "GEMINI_API_KEY=your-key" > .dev.vars
   ```

### ç¬¬äºŒæ­¥ï¼šæ‰“é€ å¯¹è¯ç»„ä»¶

è¿™æ˜¯æœ€æœ‰è¶£çš„éƒ¨åˆ†ï¼æˆ‘éœ€è¦åˆ›å»ºä¸€ä¸ªæ—¢ç¾è§‚åˆå®ç”¨çš„å¯¹è¯ç•Œé¢ã€‚

```vue
<template>
  <div class="ai-chat-widget">
    <button class="chat-toggle">ğŸ¤–</button>
    <!-- èŠå¤©çª—å£ -->
  </div>
</template>
```

**é‡åˆ°çš„é—®é¢˜**ï¼š
1. ç»„ä»¶ä¸æ˜¾ç¤º
   - åŸå› ï¼šVitePress ä¸»é¢˜é…ç½®ä¸å½“
   - è§£å†³ï¼šæ­£ç¡®é…ç½® Layout ç»„ä»¶

2. æ¶ˆæ¯æ°”æ³¡æ ·å¼
   - æŒ‘æˆ˜ï¼šç”¨æˆ·æ¶ˆæ¯é å³ï¼ŒAI æ¶ˆæ¯é å·¦
   - è§£å†³ï¼šä½¿ç”¨ Flex å¸ƒå±€ + align-items: flex-end

3. Markdown æ¸²æŸ“é—®é¢˜
   ```javascript
   const md = new MarkdownIt({
     html: true,
     highlight: function (str, lang) {
       // ä»£ç é«˜äº®å¤„ç†
     }
   })
   ```

### ç¬¬ä¸‰æ­¥ï¼šä¸Šä¸‹æ–‡å¯¹è¯å®ç°

è¿™æ˜¯æœ€å…·æŒ‘æˆ˜æ€§çš„éƒ¨åˆ†ã€‚å¦‚ä½•ä¿æŒå¯¹è¯çš„è¿è´¯æ€§ï¼Ÿ

```javascript
// å‘é€å®Œæ•´å¯¹è¯å†å²
const contents = messages.map(msg => ({
  role: msg.role === 'user' ? 'user' : 'model',
  parts: [{ text: msg.content }]
}));
```

**é‡åˆ°çš„é—®é¢˜**ï¼š
1. å†…å­˜å ç”¨
   - é—®é¢˜ï¼šå¯¹è¯å†å²è¶Šæ¥è¶Šé•¿
   - è§£å†³ï¼šè®¡åˆ’æ·»åŠ å†å²æ¶ˆæ¯æˆªæ–­æœºåˆ¶

2. å“åº”æ—¶é—´
   - é—®é¢˜ï¼šæ¶ˆæ¯è¶Šå¤šï¼Œå“åº”è¶Šæ…¢
   - ä¼˜åŒ–ï¼šè€ƒè™‘ä½¿ç”¨æ¶ˆæ¯æ‘˜è¦

## ğŸ¨ ç»†èŠ‚æ‰“ç£¨

### å“åº”å¼è®¾è®¡

```css
@media (max-width: 768px) {
  .chat-window {
    width: calc(100vw - 40px);
    height: calc(100vh - 100px);
  }
}
```

### æš—è‰²ä¸»é¢˜é€‚é…

```css
.message-content {
  background: var(--vp-c-bg-soft);
  color: var(--vp-c-text-1);
}
```

### ç”¨æˆ·ä½“éªŒä¼˜åŒ–

1. è¾“å…¥æ¡†è‡ªé€‚åº”é«˜åº¦
2. æ–°æ¶ˆæ¯è‡ªåŠ¨æ»šåŠ¨
3. åŠ è½½çŠ¶æ€æç¤º

## ğŸ”’ å®‰å…¨æ€§è€ƒè™‘

1. ç¯å¢ƒå˜é‡ç®¡ç†
   ```bash
   # ç”Ÿäº§ç¯å¢ƒ
   wrangler secret put GEMINI_API_KEY
   
   # å¼€å‘ç¯å¢ƒ
   .env.local
   .dev.vars
   ```

2. æ–‡ä»¶ä¿æŠ¤
   ```gitignore
   .env*
   .dev.vars
   ```

## ğŸ¯ æœªæ¥è®¡åˆ’

1. **åŠŸèƒ½å¢å¼º**
   - æ¶ˆæ¯å†å²ä¿å­˜
   - å›¾ç‰‡è¯†åˆ«æ”¯æŒ
   - è¯­éŸ³äº¤äº’

2. **æ€§èƒ½ä¼˜åŒ–**
   - æ¶ˆæ¯é•¿åº¦é™åˆ¶
   - ç¼“å­˜æœºåˆ¶
   - æ‰“å­—æœºæ•ˆæœ

3. **ä½“éªŒæå‡**
   - æ›´å¤šåŠ¨ç”»æ•ˆæœ
   - å¿«æ·æŒ‡ä»¤æ”¯æŒ
   - ä¸»é¢˜å®šåˆ¶

## ğŸ“ æ€»ç»“

è¿™ä¸ªé¡¹ç›®è®©æˆ‘æ·±å…¥ä½“éªŒäº†ç°ä»£ Web å¼€å‘çš„æ–¹æ–¹é¢é¢ï¼š

- å‰ç«¯ç»„ä»¶è®¾è®¡
- åç«¯æœåŠ¡æ¶æ„
- API å®‰å…¨æ€§è€ƒè™‘
- ç”¨æˆ·ä½“éªŒä¼˜åŒ–

æœ€è®©æˆ‘æƒŠå–œçš„æ˜¯ï¼Œè¿™ä¸ª AI åŠ©æ‰‹ä¸ä»…å®ç°äº†é¢„æœŸåŠŸèƒ½ï¼Œè¿˜åœ¨å®é™…ä½¿ç”¨ä¸­å±•ç°å‡ºäº†å¾ˆå¥½çš„å®ç”¨æ€§ã€‚å½“ç„¶ï¼Œè¿™åªæ˜¯ä¸€ä¸ªå¼€å§‹ï¼Œæœªæ¥è¿˜æœ‰å¾ˆå¤šä¼˜åŒ–ç©ºé—´ã€‚

å¦‚æœä½ ä¹Ÿæƒ³ä¸ºè‡ªå·±çš„åšå®¢æ·»åŠ ç±»ä¼¼åŠŸèƒ½ï¼Œå¸Œæœ›è¿™ç¯‡æ–‡ç« èƒ½ç»™ä½ ä¸€äº›å¯å‘ã€‚å®Œæ•´çš„ä»£ç å·²ç»å¼€æºï¼Œæ¬¢è¿å‚è€ƒå’Œæ”¹è¿›ï¼

> æç¤ºï¼šè®°å¾—ä¿æŠ¤å¥½ä½ çš„ API å¯†é’¥ï¼Œä¸è¦åƒæˆ‘ä¸€å¼€å§‹é‚£æ ·ç›´æ¥å†™åœ¨ä»£ç é‡Œï¼ğŸ˜…

## ğŸ”— ç›¸å…³èµ„æº

- [Gemini API æ–‡æ¡£](https://ai.google.dev/docs)
- [Cloudflare Workers æ–‡æ¡£](https://developers.cloudflare.com/workers/)
- [VitePress æ–‡æ¡£](https://vitepress.dev/)
- [å®Œæ•´ä»£ç ä»“åº“](#) 